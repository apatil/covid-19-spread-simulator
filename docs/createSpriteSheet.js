import{BALL_RADIUS,COLORS,STATES,BADGE_RADIUS,INTERVENTION_BADGES,BADGE_COLORS}from"./options.js";function getCombinations(t){var e=[],i=function(t=[],o){for(var S=0;S<o.length;S++)e.push([...t,o[S]]),i([...t,o[S]],o.slice(S+1))};return i("",t),e}const spriteSize=2*(BALL_RADIUS+BADGE_RADIUS),angleStep=2*Math.PI/INTERVENTION_BADGES.length,badgePositions=INTERVENTION_BADGES.map((t,e)=>{const i=e*angleStep-Math.PI;return[BALL_RADIUS*Math.cos(i),BALL_RADIUS*Math.sin(i)]}),combos=getCombinations(INTERVENTION_BADGES);combos.unshift([]);const createSpriteSheet=t=>{const e=document.createElement("canvas");e.width=combos.length*spriteSize,e.height=Object.keys(STATES).length*spriteSize;const i=e.getContext("2d"),o={};for(let t=0;t<Object.keys(STATES).length;t++)for(let e=0;e<combos.length;e++){const S=Object.keys(STATES)[t],n=combos[e],s=BALL_RADIUS,A=t*spriteSize,r=e*spriteSize,l=BALL_RADIUS+BADGE_RADIUS;i.fillStyle=COLORS[S],i.beginPath(),i.arc(r+l,A+l,s,0,2*Math.PI),i.fill();for(let t=0;t<n.length;t++){const e=INTERVENTION_BADGES.indexOf(n[t]),[o,S]=badgePositions[e],s=BADGE_COLORS[e];i.fillStyle=s,i.beginPath(),i.arc(r+l+o,A+l+S,BADGE_RADIUS,0,2*Math.PI),i.fill()}let c=S;n.length>0&&(c+="-"+n.join("-")),o[c]=[r,A,spriteSize,spriteSize]}t.sprite=e,t.sprite_lookup=o};export default createSpriteSheet;
